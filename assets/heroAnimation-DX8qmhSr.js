const E=[{name:"Monet's Garden",colors:["#862B0D","#FFF9C9","#FFC95F","#333333"],bgColor:"#9DB779",grainTint:[255,252,201]},{name:"Forest Mist",colors:["#7A8C68","#99A686","#BFB7A8","#333333","#59404B"],bgColor:"#4B5940",grainTint:[153,166,134]},{name:"Sunset",colors:["#6B240C","#48240D","#E48F45","#F5CCA0","#6B240C","#333333"],bgColor:"#994D1C",grainTint:[245,204,160]},{name:"Arctic Aurora",colors:["#001219","#00734D","#0a9396","#94d2bd","#333333"],bgColor:"#005f73",grainTint:[148,210,189]},{name:"Golden Hour",colors:["#333333","#E47D6A","#787D46","#7D4E25","#222B1B"],bgColor:"#E4BA6A",grainTint:[140,120,110]},{name:"Kandinsky",colors:["#8D95A6","#F28705","#D98825","#333333"],bgColor:"#0A7360",grainTint:[250,170,25]},{name:"Twilight",colors:["#AAABA8","#AB5A55","#CD9B9D","#DBC7C9","#033540"],bgColor:"#BC7B77",grainTint:[219,199,201]},{name:"Ocean Depths",colors:["#19A7CE","#B0DAFF","#FEFF86"],bgColor:"#146C94",grainTint:[176,218,255]}];let x=null;function Y(){if(console.log("Initializing p5.js hero animation..."),!document.getElementById("heroAnimation")){console.error("Hero animation container not found");return}const S=t=>{let c=[],T=0,C=E[0],w,m,a=100;const d={isOpening:!0,startTime:0,duration:4e3,progress:0},g={duration:3e3,opacity:0,isComplete:!1},b={target:1,transitionRate:.02},y={transitionProgress:0,transitionRate:.007,isFirstBreathing:!0};let P=1;class I{constructor(e,i,o,l,s,h,u){this.centerX=e,this.centerY=i,this.baseRadius=o,this.radius=o,this.targetRadius=o,this.phase=l,this.rotationAngle=s,this.floatSpeed=.01*h,this.colorIndex=t.floor(t.random(C.colors.length)),this.initialRadius=u,this.floatRadius=30,this.targetFloatRadius=t.min(30,a*.12),this.rippleAmount=0,this.rippleDecay=.9,this.rippleStrength=40,this.targetRippleStrength=t.min(30,a*.12),this.updatePosition()}updatePosition(){let e=t.cos(this.phase)*this.floatRadius,i=t.sin(this.phase*2)*this.floatRadius*.5;this.x=this.centerX+e*t.cos(this.rotationAngle)-i*t.sin(this.rotationAngle),this.y=this.centerY+e*t.sin(this.rotationAngle)+i*t.cos(this.rotationAngle)}update(){if(this.phase+=this.floatSpeed*P,this.floatRadius+=(this.targetFloatRadius-this.floatRadius)*.02,this.rippleStrength+=(this.targetRippleStrength-this.rippleStrength)*.02,this.updatePosition(),this.checkHover(),d.isOpening)this.radius=this.baseRadius+this.rippleAmount;else{let e=this.targetRadius+this.rippleAmount;this.radius+=(e-this.radius)*.014}}display(){if(!this.radius||this.radius<=0)return;t.noFill();let e=t.color(C.colors[this.colorIndex]),i=this.rippleAmount>0?t.min(80+this.rippleAmount,120):80;e.setAlpha(i),t.stroke(e);let o=t.min(t.width||t.windowWidth,t.height||t.windowHeight);t.strokeWeight(o<540?3:2),t.circle(this.x,this.y,this.radius*2)}setTargetRadius(e,i){this.targetRadius=t.random(e,i)}updateColorIndex(){this.colorIndex=t.floor(t.random(C.colors.length))}checkHover(){t.mouseX!==void 0&&t.mouseY!==void 0&&t.dist(t.mouseX,t.mouseY,this.x,this.y)<this.radius&&(this.rippleAmount=this.rippleStrength),this.rippleAmount*=this.rippleDecay,this.rippleAmount<.1&&(this.rippleAmount=0)}updateTargets(){this.targetFloatRadius=t.min(30,a*.12),this.targetRippleStrength=t.min(30,a*.12)}}function M(){let n=t.min(t.width||t.windowWidth,t.height||t.windowHeight),e=n<540?.46:n<768?.4:.35;return n*e}function $(){c=[];const n=7;for(let e=0;e<n;e++){let i=t.TWO_PI/n*e,o=t.PI/n*e,l=t.random(.8,1.2),s=t.random(a*8,a*15),h=new I(t.width/2,t.height/2,s,i,o,l,s);c.push(h)}}function A(){if(c.length===0)return;let n=a*.8,e=a*1;c.forEach(i=>{t.random()<.5?i.setTargetRadius(a,e):i.setTargetRadius(n,a)})}function p(){let n=t.red(w),e=t.green(w),i=t.blue(w),o=Math.round(n*.35),l=Math.round(e*.35),s=Math.round(i*.35),h=k(n,e,i),u={h:h.h,s:Math.min(h.s*1.2,.8),l:Math.max(.25,Math.min(.45,h.l*.8))},r=H(u.h,u.s,u.l),f=`rgb(${Math.round(r.r)}, ${Math.round(r.g)}, ${Math.round(r.b)})`;document.documentElement.style.setProperty("--hero-text-color",`rgb(${o}, ${l}, ${s})`),document.documentElement.style.setProperty("--hero-text-color-dim",`rgba(${o}, ${l}, ${s}, 0.6)`),document.documentElement.style.setProperty("--hero-text-color-light",`rgba(${o}, ${l}, ${s}, 0.5)`),document.documentElement.style.setProperty("--interactive-color",f),document.documentElement.style.setProperty("--secondary-color",f),document.documentElement.style.setProperty("--timeline-accent-primary",f),document.documentElement.style.setProperty("--timeline-accent-hover",f),document.documentElement.style.setProperty("--timeline-accent-shadow",`rgba(${Math.round(r.r)}, ${Math.round(r.g)}, ${Math.round(r.b)}, 0.25)`),document.documentElement.style.setProperty("--timeline-accent-glow",`rgba(${Math.round(r.r)}, ${Math.round(r.g)}, ${Math.round(r.b)}, 0.1)`),document.documentElement.style.setProperty("--timeline-accent-focus",`rgba(${Math.round(r.r)}, ${Math.round(r.g)}, ${Math.round(r.b)}, 0.15)`),document.documentElement.style.setProperty("--text-color","#1f2937"),document.documentElement.style.setProperty("--text-light","#6b7280")}function k(n,e,i){n/=255,e/=255,i/=255;let o=Math.max(n,e,i),l=Math.min(n,e,i),s,h,u=(o+l)/2;if(o===l)s=h=0;else{let r=o-l;switch(h=u>.5?r/(2-o-l):r/(o+l),o){case n:s=(e-i)/r+(e<i?6:0);break;case e:s=(i-n)/r+2;break;case i:s=(n-e)/r+4;break}s/=6}return{h:s,s:h,l:u}}function H(n,e,i){let o,l,s;if(e===0)o=l=s=i;else{let h=function(f,F,R){return R<0&&(R+=1),R>1&&(R-=1),R<1/6?f+(F-f)*6*R:R<1/2?F:R<2/3?f+(F-f)*(2/3-R)*6:f},u=i<.5?i*(1+e):i+e-i*e,r=2*i-u;o=h(r,u,n+1/3),l=h(r,u,n),s=h(r,u,n-1/3)}return{r:o*255,g:l*255,b:s*255}}function D(){let n=document.getElementById("palette-name");n&&(n.textContent=C.name,n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},2e3))}function B(){if(!t.width||!t.height||t.width<=0||t.height<=0){console.warn("Invalid canvas dimensions for texture creation");return}m=t.createGraphics(t.width,t.height),m.loadPixels();let n=C.grainTint;for(let e=0;e<t.width;e+=2)for(let i=0;i<t.height;i+=2){let l=t.noise(e/3,i/3,e*i/50)*t.random(2,80),s=t.color(n[0],n[1],n[2],l);m.set(e,i,s),e+1<t.width&&m.set(e+1,i,s),i+1<t.height&&m.set(e,i+1,s),e+1<t.width&&i+1<t.height&&m.set(e+1,i+1,s)}m.updatePixels()}function O(){let n=t.millis()-d.startTime;d.progress=t.min(n/d.duration,1);let e=1-t.pow(1-d.progress,4);c.forEach(i=>{let o=t.lerp(i.initialRadius,a,e);i.baseRadius=o}),d.progress>=1&&(d.isOpening=!1,c.forEach(i=>{i.baseRadius=a,i.radius=a+i.rippleAmount,i.targetRadius=a,i.updateTargets()}),A())}function W(){P+=(b.target-P)*b.transitionRate,t.abs(P-b.target)<.01&&(b.target=t.random(0,.6),t.random()<.2&&(b.target=0),b.transitionRate=t.random(.01,.03))}function z(){if(!g.isComplete){let n=t.millis()-d.startTime,e=t.min(n/g.duration,1);g.opacity=e*e*(3-2*e),e>=1&&(g.isComplete=!0,g.opacity=1)}}function G(){y.transitionProgress+=y.transitionRate,y.transitionProgress>=1&&(y.transitionProgress=0,y.isFirstBreathing&&(y.isFirstBreathing=!1),A(),y.transitionRate=t.random(.007,.02))}t.setup=function(){let n=t.max(100,t.windowWidth),e=t.max(100,t.windowHeight);t.createCanvas(n,e).parent("heroAnimation"),a=M(),C=E[T],w=t.color(C.bgColor),t.background(w),D(),p(),d.startTime=t.millis(),d.isOpening=!0,$(),A(),m=null,console.log("p5.js setup complete, circles created:",c.length)},t.draw=function(){!t.width||!t.height||t.width<=0||t.height<=0||(t.background(w),W(),z(),d.isOpening?O():G(),c.length>0&&c.forEach(n=>{n.update(),n.display()}),!m&&t.frameCount>5&&B(),m&&g.opacity>0&&(t.tint(255,g.opacity*255),t.image(m,0,0),t.noTint()))},t.mousePressed=function(){d.isOpening||(T=(T+1)%E.length,C=E[T],w=t.color(C.bgColor),c.forEach(n=>n.updateColorIndex()),B(),D(),p(),g.opacity=1,g.isComplete=!0)};let v;t.windowResized=function(){clearTimeout(v),v=setTimeout(()=>{if(t.windowWidth<=0||t.windowHeight<=0)return;let n=a;t.resizeCanvas(t.windowWidth,t.windowHeight),t.background(w),a=M();let e=n>0?a/n:1;c.length===0?$():c.forEach(i=>{i.centerX=t.width/2,i.centerY=t.height/2,i.updateTargets(),d.isOpening?i.initialRadius*=e:(i.radius*=e,i.baseRadius=a,i.targetRadius*=e)}),B(),d.isOpening||(A(),g.opacity=1,g.isComplete=!0)},150)},t.triggerThemeChange=function(){t.mousePressed()}};x=new p5(S),console.log("p5.js instance created successfully")}function j(){x&&x.triggerThemeChange&&x.triggerThemeChange()}export{j as changeTheme,Y as initAnimation};
