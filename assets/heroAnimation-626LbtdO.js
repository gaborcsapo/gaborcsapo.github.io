const T=[{name:"Monet's Garden",colors:["#862B0D","#FFF9C9","#FFC95F","#333333"],bgColor:"#9DB779",grainTint:[255,252,201]},{name:"Forest Mist",colors:["#7A8C68","#99A686","#BFB7A8","#333333","#59404B"],bgColor:"#4B5940",grainTint:[153,166,134]},{name:"Sunset",colors:["#6B240C","#48240D","#E48F45","#F5CCA0","#6B240C","#333333"],bgColor:"#994D1C",grainTint:[245,204,160]},{name:"Arctic Aurora",colors:["#001219","#00734D","#0a9396","#94d2bd","#333333"],bgColor:"#005f73",grainTint:[148,210,189]},{name:"Golden Hour",colors:["#333333","#E47D6A","#787D46","#7D4E25","#222B1B"],bgColor:"#E4BA6A",grainTint:[140,120,110]},{name:"Kandinsky",colors:["#8D95A6","#F28705","#D98825","#333333"],bgColor:"#0A7360",grainTint:[250,170,25]},{name:"Twilight",colors:["#AAABA8","#AB5A55","#CD9B9D","#DBC7C9","#033540"],bgColor:"#BC7B77",grainTint:[219,199,201]},{name:"Ocean Depths",colors:["#19A7CE","#B0DAFF","#FEFF86"],bgColor:"#146C94",grainTint:[176,218,255]}];let x=null;function Y(){if(console.log("Initializing p5.js hero animation..."),!document.getElementById("heroAnimation")){console.error("Hero animation container not found");return}const I=t=>{let u=[],w=0,m=T[0],R,f,l=100;const d={isOpening:!0,startTime:0,duration:4e3,progress:0},c={duration:3e3,opacity:0,isComplete:!1},A={target:1,transitionRate:.02},b={transitionProgress:0,transitionRate:.007,isFirstBreathing:!0};let P=1;class S{constructor(e,i,o,r,s,h,g){this.centerX=e,this.centerY=i,this.baseRadius=o,this.radius=o,this.targetRadius=o,this.phase=r,this.rotationAngle=s,this.floatSpeed=.01*h,this.colorIndex=t.floor(t.random(m.colors.length)),this.initialRadius=g,this.floatRadius=30,this.targetFloatRadius=t.min(30,l*.12),this.rippleAmount=0,this.rippleDecay=.9,this.rippleStrength=40,this.targetRippleStrength=t.min(30,l*.12),this.updatePosition()}updatePosition(){let e=t.cos(this.phase)*this.floatRadius,i=t.sin(this.phase*2)*this.floatRadius*.5;this.x=this.centerX+e*t.cos(this.rotationAngle)-i*t.sin(this.rotationAngle),this.y=this.centerY+e*t.sin(this.rotationAngle)+i*t.cos(this.rotationAngle)}update(){if(this.phase+=this.floatSpeed*P,this.floatRadius+=(this.targetFloatRadius-this.floatRadius)*.02,this.rippleStrength+=(this.targetRippleStrength-this.rippleStrength)*.02,this.updatePosition(),this.checkHover(),d.isOpening)this.radius=this.baseRadius+this.rippleAmount;else{let e=this.targetRadius+this.rippleAmount;this.radius+=(e-this.radius)*.014}}display(){if(!this.radius||this.radius<=0)return;t.noFill();let e=t.color(m.colors[this.colorIndex]),i=this.rippleAmount>0?t.min(80+this.rippleAmount,120):80;e.setAlpha(i),t.stroke(e);let o=t.min(t.width||t.windowWidth,t.height||t.windowHeight);t.strokeWeight(o<540?3:2),t.circle(this.x,this.y,this.radius*2)}setTargetRadius(e,i){this.targetRadius=t.random(e,i)}updateColorIndex(){this.colorIndex=t.floor(t.random(m.colors.length))}checkHover(){t.mouseX!==void 0&&t.mouseY!==void 0&&t.dist(t.mouseX,t.mouseY,this.x,this.y)<this.radius&&(this.rippleAmount=this.rippleStrength),this.rippleAmount*=this.rippleDecay,this.rippleAmount<.1&&(this.rippleAmount=0)}updateTargets(){this.targetFloatRadius=t.min(30,l*.12),this.targetRippleStrength=t.min(30,l*.12)}}function $(){let n=t.min(t.width||t.windowWidth,t.height||t.windowHeight),e=n<540?.46:n<768?.4:.35;return n*e}function D(){u=[];const n=7;for(let e=0;e<n;e++){let i=t.TWO_PI/n*e,o=t.PI/n*e,r=t.random(.8,1.2),s=t.random(l*8,l*15),h=new S(t.width/2,t.height/2,s,i,o,r,s);u.push(h)}}function E(){if(u.length===0)return;let n=l*.8,e=l*1;u.forEach(i=>{t.random()<.5?i.setTargetRadius(l,e):i.setTargetRadius(n,l)})}function p(){let n=t.red(R),e=t.green(R),i=t.blue(R),o=Math.round(n*.35),r=Math.round(e*.35),s=Math.round(i*.35),h=k(n,e,i),g={h:h.h,s:Math.min(h.s*1.2,.8),l:Math.max(.25,Math.min(.45,h.l*.8))},a=O(g.h,g.s,g.l),C=`rgb(${Math.round(a.r)}, ${Math.round(a.g)}, ${Math.round(a.b)})`;document.documentElement.style.setProperty("--hero-text-color",`rgb(${o}, ${r}, ${s})`),document.documentElement.style.setProperty("--hero-text-color-dim",`rgba(${o}, ${r}, ${s}, 0.6)`),document.documentElement.style.setProperty("--hero-text-color-light",`rgba(${o}, ${r}, ${s}, 0.5)`),document.documentElement.style.setProperty("--interactive-color",C),document.documentElement.style.setProperty("--secondary-color",C),document.documentElement.style.setProperty("--timeline-accent-primary",C),document.documentElement.style.setProperty("--timeline-accent-hover",C),document.documentElement.style.setProperty("--timeline-accent-shadow",`rgba(${Math.round(a.r)}, ${Math.round(a.g)}, ${Math.round(a.b)}, 0.25)`),document.documentElement.style.setProperty("--timeline-accent-glow",`rgba(${Math.round(a.r)}, ${Math.round(a.g)}, ${Math.round(a.b)}, 0.1)`),document.documentElement.style.setProperty("--timeline-accent-focus",`rgba(${Math.round(a.r)}, ${Math.round(a.g)}, ${Math.round(a.b)}, 0.15)`),document.documentElement.style.setProperty("--text-color","#1f2937"),document.documentElement.style.setProperty("--text-light","#6b7280")}function k(n,e,i){n/=255,e/=255,i/=255;let o=Math.max(n,e,i),r=Math.min(n,e,i),s,h,g=(o+r)/2;if(o===r)s=h=0;else{let a=o-r;switch(h=g>.5?a/(2-o-r):a/(o+r),o){case n:s=(e-i)/a+(e<i?6:0);break;case e:s=(i-n)/a+2;break;case i:s=(n-e)/a+4;break}s/=6}return{h:s,s:h,l:g}}function O(n,e,i){let o,r,s;if(e===0)o=r=s=i;else{let h=function(C,M,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?C+(M-C)*6*y:y<1/2?M:y<2/3?C+(M-C)*(2/3-y)*6:C},g=i<.5?i*(1+e):i+e-i*e,a=2*i-g;o=h(a,g,n+1/3),r=h(a,g,n),s=h(a,g,n-1/3)}return{r:o*255,g:r*255,b:s*255}}function F(){let n=document.getElementById("palette-name");n&&(n.textContent=m.name,n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},2e3))}function B(){if(!t.width||!t.height||t.width<=0||t.height<=0){console.warn("Invalid canvas dimensions for texture creation");return}f=t.createGraphics(t.width,t.height),f.loadPixels();let n=m.grainTint;for(let e=0;e<t.width;e+=2)for(let i=0;i<t.height;i+=2){let r=t.noise(e/3,i/3,e*i/50)*t.random(2,80),s=t.color(n[0],n[1],n[2],r);f.set(e,i,s),e+1<t.width&&f.set(e+1,i,s),i+1<t.height&&f.set(e,i+1,s),e+1<t.width&&i+1<t.height&&f.set(e+1,i+1,s)}f.updatePixels()}function H(){let n=t.millis()-d.startTime;d.progress=t.min(n/d.duration,1);let e=1-t.pow(1-d.progress,4);u.forEach(i=>{let o=t.lerp(i.initialRadius,l,e);i.baseRadius=o}),d.progress>=1&&(d.isOpening=!1,u.forEach(i=>{i.baseRadius=l,i.radius=l+i.rippleAmount,i.targetRadius=l,i.updateTargets()}),E())}function W(){P+=(A.target-P)*A.transitionRate,t.abs(P-A.target)<.01&&(A.target=t.random(0,.6),t.random()<.2&&(A.target=0),A.transitionRate=t.random(.01,.03))}function z(){if(!c.isComplete){let n=t.millis()-d.startTime,e=t.min(n/c.duration,1);c.opacity=e*e*(3-2*e),e>=1&&(c.isComplete=!0,c.opacity=1)}}function G(){b.transitionProgress+=b.transitionRate,b.transitionProgress>=1&&(b.transitionProgress=0,b.isFirstBreathing&&(b.isFirstBreathing=!1),E(),b.transitionRate=t.random(.007,.02))}t.setup=function(){const n=document.getElementById("hero"),e=n?n.getBoundingClientRect():{width:t.windowWidth,height:t.windowHeight};let i=t.max(100,e.width),o=t.max(100,e.height),r=t.createCanvas(i,o);r.parent("heroAnimation"),r.elt.addEventListener("click",function(s){d.isOpening||(s.stopPropagation(),w=(w+1)%T.length,m=T[w],R=t.color(m.bgColor),u.forEach(h=>h.updateColorIndex()),B(),F(),p(),c.opacity=1,c.isComplete=!0)}),l=$(),m=T[w],R=t.color(m.bgColor),t.background(R),F(),p(),d.startTime=t.millis(),d.isOpening=!0,D(),E(),f=null,console.log("p5.js setup complete, circles created:",u.length)},t.draw=function(){!t.width||!t.height||t.width<=0||t.height<=0||(t.background(R),W(),z(),d.isOpening?H():G(),u.length>0&&u.forEach(n=>{n.update(),n.display()}),!f&&t.frameCount>5&&B(),f&&c.opacity>0&&(t.tint(255,c.opacity*255),t.image(f,0,0),t.noTint()))},t.mousePressed=void 0;let v;t.windowResized=function(){clearTimeout(v),v=setTimeout(()=>{const n=document.getElementById("hero"),e=n?n.getBoundingClientRect():{width:t.windowWidth,height:t.windowHeight};if(e.width<=0||e.height<=0)return;let i=l;t.resizeCanvas(e.width,e.height),t.background(R),l=$();let o=i>0?l/i:1;u.length===0?D():u.forEach(r=>{r.centerX=t.width/2,r.centerY=t.height/2,r.updateTargets(),d.isOpening?r.initialRadius*=o:(r.radius*=o,r.baseRadius=l,r.targetRadius*=o)}),B(),d.isOpening||(E(),c.opacity=1,c.isComplete=!0)},150)},t.triggerThemeChange=function(){d.isOpening||(w=(w+1)%T.length,m=T[w],R=t.color(m.bgColor),u.forEach(n=>n.updateColorIndex()),B(),F(),p(),c.opacity=1,c.isComplete=!0)}};x=new p5(I),console.log("p5.js instance created successfully")}function j(){x&&x.triggerThemeChange&&x.triggerThemeChange()}export{j as changeTheme,Y as initAnimation};
